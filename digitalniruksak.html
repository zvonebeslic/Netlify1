<!DOCTYPE html>
<html lang="hr">
<head>
  <!-- =========================================================
       META / PWA / OSNOVNO (SEO: lang=hr, title, description)
       ========================================================= -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Mountain Adventures — Digitalni ruksak</title>
  <meta name="description" content="Digitalni ruksak: vodiči, kamera, kompas s fiksnim N/E/S/W (igla fiksna, brojčanik se rotira), strelica prema najbližoj točki GPX staze, povratna ruta (backtrack), savjeti izvan mreže, SOS, meteoprognoza, noćno nebo i terenski vodič.">
  <link rel="icon" href="images/mountain-adventures.svg" type="image/svg+xml">
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#0e0f10">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-icon" href="images/mountain-adventures-192.png">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">

     <link rel="stylesheet" href="season.css" />
  
  <!-- =========================================================
       STILOVI (format: jedno svojstvo u jednom redu)
       ========================================================= -->
  <style>
    :root {
      --bg: #0e0f10;
      --fg: #e9eef2;
      --muted: #9aa6b2;
      --card: #121416;
      --line: #1f2327;
      --accent: #2aa96b;
      --accent-2: #3aa0ff;
      --accent-3: #e44747;
      --ok: #86d486;
      --warn: #f2c14e;
      --bad: #ff6b6b;
    }

    * {
      box-sizing: border-box;
    }

    html, body {
      height: 100%;
    }

    body {
      margin: 0;
      background: var(--bg);
      color: var(--fg);
      font: 500 15px/1.5 Montserrat, system-ui, Segoe UI, Roboto, Arial, sans-serif;
      -webkit-font-smoothing: antialiased;
      text-rendering: optimizeLegibility;
    }

        /* =========================================================
       NAVBAR
       ========================================================= */
    .navbar {
      position: fixed;
      z-index: 1000;
      top: 0;
      right: 0;
      left: 0;
      height: 70px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 15px;
      border-bottom: 1px solid var(--line);
      background: rgba(0, 0, 0, 0.55);
    }

    .navbar-left img {
      position: relative;
      height: 16px;
      width: 24px;
      cursor: pointer;
    }

    .navbar-left img:hover::after {
      position: absolute;
      top: 30px;
      left: 0;
      content: attr(data-tooltip);
      padding: 4px 8px;
      border-radius: 5px;
      background: #ffffff;
      color: #000;
      font-size: 12px;
      white-space: nowrap;
      box-shadow: 0 0 6px rgba(0, 0, 0, .2);
    }

.navbar-center {
  flex: 1;
  display: flex;
  justify-content: center;
  z-index: 1;
  transform: translateY(12px);
}

.search-container {
  width: 250px;
  position: relative;
  padding-top: 10px;
  z-index: 1;
}

.search-wrapper {
  position: relative;
  z-index: 2;
  width: 100%;
  height: 30px; /* ili 55px ako dodaješ prostor za sliku */
  background: #fff;
  box-shadow: 0 3px 8px rgba(0, 0, 0, 0.3);
  padding: 0 15px;
  display: flex;
  align-items: flex-end;
  justify-content: center;
  overflow: visible;
  border-radius: 20px;
}

/* === UKRASNA PLANINA IZNAD TRAŽILICE === */
.search-top-decoration {
  position: absolute;
  top: -212.7px;
  left: 108px;
  width: 1600%;
  height: 30px;
  object-fit: cover;
  display: block;
  z-index: -10;
  transform: scale(19);
  transform-origin: top center;
  pointer-events: none;
}
      
/* === UNUTARNJI INPUT POLJE === */
.mountain-search {
  width: 100%;
  padding: 14px 40px 8px 12px;
  font-size: 14px;
  border: none;
  background: transparent;
  color: #333;
  outline: none;
}

/* === IKONA UNUTAR TRAŽILICE === */
.search-wrapper img {
  position: absolute;
  right: 12px;
  bottom: 8px;
  width: 19px;
  height: 19px;
  pointer-events: none;
}
     .navbar-right {
      display: flex;
      flex-direction: column;
      gap: 5px;
      padding: 8px;
      border: 1px solid rgba(255, 255, 255, .35);
      border-radius: 8px;
      background: rgba(255, 255, 255, .05);
      cursor: pointer;
    }

    .burger-line {
      width: 26px;
      height: 3px;
      border-radius: 2px;
      background: #fff;
    }

.menu-overlay {
  position: fixed;
  top: 70px;
  right: 0;
  width: 35vw;
  background-color: rgba(17, 17, 17, 0.95);
  color: white;
  padding: 20px;
  display: none;
  flex-direction: column;
  align-items: flex-start;
  z-index: 9999;
}

.menu-overlay.open {
  display: flex;
}

.menu-overlay a {
  margin: 10px 0;
  text-decoration: none;
  color: white;
  font-size: 1.1em;
  font-family: Arial, sans-serif;
}

    
    header.page-head {
      padding: 10px 14px;
      border-bottom: 1px solid var(--line);
      margin-top: 70px;
    }

    header.page-head h1 {
      margin: 0;
      font-size: 18px;
      text-align: center;
    }

    header.page-head .intro {
      margin: 4px 0 0;
      color: var(--muted);
      font-size: 10px;
      text-align: center;
    }

    main {
      max-width: 1100px;
      margin: 0 auto;
      padding: 18px 14px 28px;
    }

    .tools-grid {
      margin: 10px 0 0;
      display: grid;
      gap: 14px;
      grid-template-columns: repeat(auto-fill, minmax(310px, 1fr));
    }

    .tool-card {
      background: var(--card);
      border: 1px solid var(--line);
      border-radius: 14px;
      padding: 12px;
    }

    .eyebrow {
      font-size: 11px;
      color: var(--muted);
      letter-spacing: .3px;
      text-transform: uppercase;
    }

    .tool-card h3 {
      margin: 5px 0 20px;
      font-size: 16px;
    }

    .tool-card p,
    .tool-card ul {
      color: var(--muted);
      font-size: 13px;
    }

    .tool-card ul {
      margin: 6px 0 8px 18px;
      padding: 0;
    }

    .btn-row {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }

    .btn {
      appearance: none;
      border: 0;
      border-radius: 10px;
      padding: .55em .9em;
      font-weight: 700;
      background: var(--accent);
      color: #fff;
      cursor: pointer;
      text-decoration: none;
      display: inline-block;
      font-size: 13px;
    }

    .btn.ghost {
      background: #2b2f36;
    }

    .btn.alt {
      background: var(--accent-2);
    }

    .btn.alert {
      background: var(--accent-3);
    }

    .chip {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      border: 1px solid var(--line);
      padding: .3em .6em;
      border-radius: 999px;
      font-size: 12px;
      color: var(--muted);
    }

    .ok {
      color: var(--ok);
    }

    .warn {
      color: var(--warn);
    }

    .bad {
      color: var(--bad);
    }

    .hint {
      color: var(--muted);
      font-size: 12px;
    }

    section.tool-panel {
      margin-top: 18px;
      background: var(--card);
      border: 1px solid var(--line);
      border-radius: 14px;
      padding: 12px;
    }

    /* da panel ‘stane’ ispod fiksnog navbara kada se scroll-a */
     .tool-panel { scroll-margin-top: 84px; }

    section.tool-panel h4 {
      margin: 0 0 15px;
      font-size: 16px;
    }

    .divider {
      height: 1px;
      background: var(--line);
      margin: 10px 0 12px;
    }

    .two-col {
      display: grid;
      gap: 12px;
      grid-template-columns: 1fr;
    }

    @media (min-width: 800px) {
      .two-col {
        grid-template-columns: .9fr 1.1fr;
      }
    }

    /* ---------------- Kamera ---------------- */
    .camera-wrap {
      display: grid;
      gap: 10px;
    }

    video#camVideo {
      width: 100%;
      aspect-ratio: 9 / 16;
      max-height: 72vh;
      background: #000;
      border-radius: 10px;
    }

    canvas#camCanvas {
      display: none;
    }

    .toolbar {
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
    }

    .dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: #a33;
      box-shadow: 0 0 6px #600;
    }

    .dot.ok {
      background: #3c3;
      box-shadow: 0 0 8px #2a2;
    }

    #camMsg {
      min-width: 200px;
      color: var(--muted);
      font-size: 12px;
    }

    #camThumb {
      max-width: 220px;
      border-radius: 8px;
      border: 1px solid var(--line);
    }

    /* ---------------- Kompas + Libela ---------------- */
    .compass-wrap {
      display: grid;
      gap: 10px;
    }

    .compass-row {
      display: flex;
      gap: 14px;
      align-items: center;
      flex-wrap: wrap;
    }

    .compass {
      width: 150px;
      height: 150px;
      border-radius: 50%;
      border: 1px solid var(--line);
      background: radial-gradient(closest-side, rgba(255,255,255,.06), rgba(0,0,0,0) 60%), radial-gradient(transparent 58%, #1b1f25 59%);
      display: grid;
      place-items: center;
      position: relative;
      perspective: 800px;
    }

    .compass .tick {
      position: absolute;
      inset: 8px;
      border-radius: 50%;
      border: 1px dashed #2a2f36;
    }

    .compass-ring {
      position: absolute;
      inset: 0;
      border-radius: 50%;
      border: 2px solid rgba(255,255,255,.18);
      box-shadow: 0 0 24px rgba(0,0,0,.25) inset;
      transform-origin: 50% 50%;
      transform: rotate(0deg);
      will-change: transform;
      backface-visibility: hidden;
    }

    .compass-ring .mark {
      position: absolute;
      font: 700 12px/1 Montserrat, system-ui;
      letter-spacing: .12em;
      color: #fff;
      text-shadow: 0 1px 2px rgba(0,0,0,.6);
      user-select: none;
    }

    .compass-ring .n {
      top: 4px;
      left: 50%;
      transform: translateX(-50%);
      color: #ff3b3b;
    }

    .compass-ring .s {
      bottom: 4px;
      left: 50%;
      transform: translateX(-50%);
    }

    .compass-ring .e {
      right: 4px;
      top: 50%;
      transform: translateY(-50%);
    }

    .compass-ring .w {
      left: 4px;
      top: 50%;
      transform: translateY(-50%);
    }

    .compass-ring .ticks {
      position: absolute;
      inset: 10px;
      border-radius: 50%;
      -webkit-mask: radial-gradient(transparent 56%, #000 56.3%);
      mask: radial-gradient(transparent 56%, #000 56.3%);
      background: conic-gradient(from 0deg, rgba(255,255,255,.18) 0 1deg, transparent 1deg 9deg);
    }

    .north-needle {
      position: absolute;
      left: 50%;
      top: 50%;
      width: 4px;
      height: 120px;
      transform-origin: 50% 92%;
      transform: translate(-50%, -92%) rotate(0deg);
      filter: drop-shadow(0 0 4px rgba(255,0,0,.35));
      pointer-events: none;
    }

    .north-needle .tip {
      position: absolute;
      left: -6px;
      top: -6px;
      width: 16px;
      height: 35px;
      background: linear-gradient(#ff6464, #d30000);
      clip-path: polygon(50% 0, 100% 100%, 50% 78%, 0 100%);
      border-radius: 2px;
    }

    .target-arrow {
      position: absolute;
      left: 50%;
      top: 50%;
      width: 40px;
      height: 80px;
      transform: translate(-50%, -50%) rotate(0deg);
      transform-origin: 50% 50%;
      transform-box: fill-box;
      will-change: transform;
      filter: drop-shadow(0 0 6px rgba(0,224,255,.5));
      opacity: 1;
      transition: opacity .25s ease;
      pointer-events: none;
    }

    .arrow3d {
      width: 68px;
      height: 12px;
      position: relative;
      transform-style: preserve-3d;
      transition: transform .14s ease-out, opacity .14s ease-out, filter .2s ease-out;
      filter: drop-shadow(0 10px 14px rgba(0,0,0,.35));
    }

    .arrow3d::after {
      content: "";
      position: absolute;
      left: 0;
      top: 2px;
      bottom: 2px;
      width: 58px;
      border-radius: 6px;
      background: linear-gradient(180deg, #36c286, #1e915f);
      box-shadow: inset 0 1px 0 rgba(255,255,255,.2), inset 0 -1px 0 rgba(0,0,0,.2);
      transform: translateZ(0.6px);
    }

    .arrow3d::before {
      content: "";
      position: absolute;
      right: -14px;
      top: -6px;
      border-left: 14px solid #36c286;
      border-top: 12px solid transparent;
      border-bottom: 12px solid transparent;
      transform: translateZ(0.8px);
      filter: drop-shadow(0 2px 2px rgba(0,0,0,.4));
    }

    .arrow3d.warn::after {
      background: linear-gradient(180deg, #f4c35f, #c78f2a);
    }

    .arrow3d.warn::before {
      border-left-color: #f4c35f;
    }

    .arrow3d.bad::after {
      background: linear-gradient(180deg, #ff7a7a, #d84e4e);
    }

    .arrow3d.bad::before {
      border-left-color: #ff7a7a;
    }

    .level-wrap {
      width: 140px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
    }

    .level-ring {
      position: relative;
      width: 132px;
      height: 132px;
      border-radius: 50%;
      border: 2px solid rgba(255,255,255,.18);
      box-shadow: inset 0 0 18px rgba(0,0,0,.25);
      background: radial-gradient(circle at 50% 50%, rgba(255,255,255,.06) 0 55%, transparent 56% 100%);
      overflow: hidden;
    }

    .lvl-cross {
      position: absolute;
      background: rgba(255,255,255,.18);
      pointer-events: none;
    }

    .lvl-h {
      left: 8%;
      right: 8%;
      top: 50%;
      height: 1px;
      transform: translateY(-0.5px);
    }

    .lvl-v {
      top: 8%;
      bottom: 8%;
      left: 50%;
      width: 1px;
      transform: translateX(-0.5px);
    }

    .level-bubble {
      position: absolute;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: #fff;
      box-shadow: none !important;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
    }

    .level-readout {
      display: flex;
      gap: 8px;
      font: 600 11px/1.2 Montserrat, system-ui;
      color: #fff;
      opacity: .8;
    }

    /* ---------------- Mini HUD strelica ---------------- */
    #miniCompass {
      position: fixed;
      left: 10px;
      bottom: 10px;
      z-index: 9999;
      width: 78px;
      height: 78px;
      border-radius: 14px;
      padding: 8px;
      background: rgba(18,20,22,.9);
      border: 1px solid var(--line);
      backdrop-filter: blur(6px);
      box-shadow: 0 8px 24px rgba(0,0,0,.35);
      touch-action: none;
      user-select: none;
    }

    #miniCompass .mini-ring {
      width: 100%;
      height: 52px;
      border-radius: 999px;
      border: 1px dashed #2a2f36;
      display: grid;
      place-items: center;
      position: relative;
      overflow: hidden;
    }

    #miniCompass .mini-needle {
      width: 40px;
      height: 6px;
      background: #2aa96b;
      border-radius: 4px;
      transform-origin: 0% 50%;
      transition: transform .14s ease-out, background .2s ease-out;
    }

    #miniCompass .mini-needle.warn {
      background: #e09f3e;
    }

    #miniCompass .mini-needle.bad {
      background: #e44747;
    }

    #miniCompass .mini-info {
      text-align: center;
      font-size: 11px;
      color: var(--muted);
      margin-top: 4px;
    }

    #miniCompass[hidden] {
      display: none;
    }

    #targetArrow {
      display: none;
    }

    #onPathOK {
      display: none;
    }

    .hidden {
      display: none !important;
    }

    /* ---------------- Banner / Modal ---------------- */
    .banner {
      position: fixed;
      left: 0;
      right: 0;
      bottom: 0;
      background: #2b2f36;
      border-top: 1px solid var(--line);
      padding: 8px 12px;
      display: flex;
      align-items: center;
      gap: 8px;
      z-index: 10000;
    }

    .banner .msg {
      color: #ddd;
      font-size: 13px;
    }

    .banner .actions {
      margin-left: auto;
      display: flex;
      gap: 8px;
    }

    .modal-back {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,.55);
      display: none;
      place-items: center;
      z-index: 10001;
    }

    .modal {
      background: #161a1e;
      border: 1px solid var(--line);
      border-radius: 12px;
      padding: 14px;
      max-width: 520px;
      width: 92%;
    }

    .modal h5 {
      margin: 0 0 6px;
      font-size: 16px;
    }

    .modal p {
      margin: 0 0 10px;
      color: var(--muted);
      font-size: 13px;
    }

    .modal .actions {
      display: flex;
      gap: 8px;
      justify-content: flex-end;
    }

    /* ---------------- Meteo kartice ---------------- */
    .weather-grid {
      display: grid;
      gap: 10px;
      grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
    }

    .wx-card {
      background: #14171b;
      border: 1px solid var(--line);
      border-radius: 10px;
      padding: 10px;
    }

    .wx-card h5 {
      margin: 0 0 4px;
      font-size: 14px;
    }

    .wx-meta {
      font-size: 12px;
      color: var(--muted);
    }

    /* ---------------- Nebo (platno) ---------------- */
    #skyCanvas {
      width: 100%;
      max-width: 520px;
      height: 300px;
      background: #020309;
      border: 1px solid var(--line);
      border-radius: 10px;
      display: block;
    }

    .sky-legend {
      font-size: 12px;
      color: var(--muted);
    }

    /* ---------------- Flora/Fauna vodič ---------------- */
    .id-grid {
      display: grid;
      gap: 8px;
      grid-template-columns: 1fr;
    }

    .id-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .tag {
      padding: .35em .6em;
      background: #1a1d22;
      border: 1px solid var(--line);
      border-radius: 999px;
      font-size: 12px;
      color: #d8dee6;
    }

       /* === PeakCam (pc-*) — panel stilovi, bez kolizija === */
.pc-wrap {
  display: grid;
  gap: 12px;
}

.pc-toolbar {
  display: flex;
  gap: 8px;
  align-items: center;
  flex-wrap: wrap;
  margin-bottom: 8px;
}

.pc-inline {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  color: var(--muted);
  margin-right: 10px;
}

.pc-stage {
  position: relative;
  width: 100%;
  background: #000;
  border-radius: 12px;
  border: 1px solid var(--line);
  overflow: hidden;
}

#pc-video,
#pc-overlay {
  width: 100%;
  height: auto;
  display: block;
}

#pc-overlay {
  position: absolute;
  inset: 0;
  pointer-events: none;
}

.pc-hint {
  position: absolute;
  left: 0;
  right: 0;
  top: 50%;
  transform: translateY(-50%);
  text-align: center;
  color: #fff;
  opacity: .9;
  padding: 10px;
}

.pc-legend {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  align-items: center;
}

.pc-attrib {
  font-size: 12px;
  color: var(--muted);
}

    
          /* =========================================================
       FOOTER / BACK TO TOP
       ========================================================= */
      #backToTop {
  position: fixed;
  bottom: 22px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 99999;
  background: rgba(255, 255, 255, 0.2);
  backdrop-filter: blur(12px);
  color: white;
  border: 1px solid rgba(255, 255, 255, 0.3);
  outline: none;
  width: 48px;
  height: 48px;
  border-radius: 50%;
  cursor: pointer;
  display: none;
  align-items: center;
  justify-content: center;
  transition: background 0.3s ease, transform 0.3s ease;
}

#backToTop:hover {
  background-color: rgba(255, 255, 255, 0.3);
  transform: translateX(-50%) scale(1.1);
}

#backToTop svg {
  width: 24px;
  height: 24px;
}

  footer {
  background: #111;
  color: #ccc;
  font-family: Arial, sans-serif !important;  
  text-align: center;
  padding: 20px 10px;
  font-size: 14px;
  position: relative;
  margin-top: 60px;
}

.footer-icons {
  margin: 10px 0;
}

.footer-icons svg {
  width: 32px;
  height: 32px;
  margin: 0 10px;
  vertical-align: middle;
  opacity: 0.8;
  transition: opacity 0.3s, transform 0.3s;
}

.footer-icons svg:hover {
  opacity: 1;
  transform: scale(1.1);
}
    
  </style>
</head>
<body>
<!-- === NAVIGACIJA (gore) === -->
  <div class="navbar">
    <div class="navbar-left">
      <img src="images/flag-uk.svg" alt="promjena jezika na engleski" id="language-toggle" data-tooltip="Promijeni jezik">
    </div>
    <div class="navbar-center">
      <div class="search-container">
        <div class="search-wrapper">
          <img src="images/planine-za-trazilicu.png" alt="planinski-vrhovi" class="search-top-decoration" />
          <input type="text" class="mountain-search" id="search" placeholder="Pretraži...">
          <img src="images/search.svg" alt="ikona za tražilicu">
        </div>
      </div>
    </div>
    <div class="navbar-right" id="menu-toggle">
      <div class="burger-line"></div>
      <div class="burger-line"></div>
      <div class="burger-line"></div>
    </div>
  </div>

  <!-- === HAMBURGER MENI === -->
  <div class="menu-overlay" id="menu">
    <a href="index.html" data-hr="Naslovna" data-en="Home">Naslovna</a>
    <a href="staze.html" data-hr="Staze" data-en="Trails">Staze</a>
    <a href="avantura.html" data-hr="Avantura" data-en="Adventure">Avantura</a>
    <a href="webshop.html" data-hr="Web shop" data-en="Web Shop">Web shop</a>
    <a href="planinarskevijesti.html" data-hr="Blog" data-en="Blog">Blog</a>
    <a href="digitalniruksak.html" data-hr="Digitalni ruksak" data-en="Digital backpack">Digitalni ruksak</a>
    <a href="kontakt.html" data-hr="Kontakt" data-en="Contact">Kontakt</a>
  </div>

  <!-- === SEASON TOGGLE IKONE === -->
<div id="season-toggle-wrapper">
  <img src="images/seasonchange.svg" id="season-toggle" alt="odabir godišnjeg doba" />
  <div id="season-strike" class="hidden"></div> <!-- KOSA CRTA -->
  <div id="season-icons">
    <div class="season-icon" data-season="winter">❄️</div>
    <div class="season-icon" data-season="spring">🌸</div>
    <div class="season-icon" data-season="summer">☀️</div>
    <div class="season-icon" data-season="autumn">🍂</div>
  </div>
 </div>

  <!-- =========================================================
       NASLOV
       ========================================================= -->
  <header class="page-head">
    <h1>Digitalni ruksak</h1>
    <p class="intro">Vaš Digitalni Vodič na jednom mjestu. Upute za Prvu Pomoć, Pametna Kamera, Pametni Kompas, Noćno nebo, Vremenska prognoza i Vodič za biljni i životinjski svijet te još dosta korisnih stvari.</p>
  </header>

  <!-- =========================================================
       GLAVNI SADRŽAJ — KARTICE ALATA
       ========================================================= -->
  <main>
    <section class="tools-grid" aria-label="Alati">
      <!-- Kartica: Vodiči -->
      <article class="tool-card" id="tool-aid">
        <div class="eyebrow">Prioritet</div>
        <h3>Upute za Prvu Pomoć</h3>
        <p>Brzi koraci koje svatko može slijediti. Prvo sigurnost mjesta, zatim 112.</p>
        <div class="btn-row">
          <button class="btn alt" id="openAidPanel">Otvori vodiče</button>
          <span class="chip">⛰️ Podsjetnici pri ruci</span>
        </div>
      </article>

      <!-- Kartica: Kamera -->
      <article class="tool-card" id="tool-camera">
        <div class="eyebrow">Foto</div>
        <h3>Pametna Kamera</h3>
        <p>Stabilan kadar → blago pojačanje kontrasta/boje/oštrine → snimka (izvan mreže).</p>
        <ul>
          <li>Samookidanje kad se kadar umiri</li>
          <li>Radi na HTTPS/localhost</li>
          <li>Bez slanja na poslužitelj</li>
        </ul>
        <div class="btn-row">
          <button class="btn" id="openCamPanel">Otvori alat</button>
          <a class="btn ghost" href="tools/camera-auto-enhance.html">U novoj kartici</a>
        </div>
        <p class="hint">Privatnost: snimka ostaje u tvom pregledniku.</p>
      </article>

      <!-- Kartica: Kompas/GPX -->
      <article class="tool-card" id="tool-arrow">
        <div class="eyebrow">Orijentacija</div>
        <h3>Pametni Kompas</h3>
        <p>Oznake N/E/S/W rotiraju prema smjeru kretanja, crvena igla je fiksna i pokazuje <b>geografski sjever</b> (s deklinacijom). Kad poravnaš s N (±5°), plava strelica pokazuje najbližu točku GPX staze.</p>
        <div class="btn-row">
          <button class="btn" id="openArrowPanel">Otvori alat</button>
          <button class="btn ghost" id="openPopupBtn" title="Iskočni prozor sa mini strelicom">Iskočni prozor</button>
          <button class="btn ghost" id="closePopupBtn" title="Zatvori iskočni prozor" style="display:none">Zatvori iskočni prozor</button>
        </div>
        <p class="hint">iOS traži dopuštenje za “Motion &amp; Orientation”; radi na HTTPS-u.</p>
      </article>

      <!-- Kartica: Nebo -->
      <article class="tool-card" id="tool-sky">
        <div class="eyebrow">Noć</div>
        <h3>Noćno nebo</h3>
        <p>Prikaz svjetlijih zvijezda. Kad telefon uperiš prema gore, asterizmi se <b>naglašavaju i spajaju linijama</b>.</p>
        <div class="btn-row">
          <button class="btn" id="openSkyPanel">Otvori nebo</button>
        </div>
        <p class="hint">Za preciznije: Stellarium Mobile ili Sky Map.</p>
      </article>

      <!-- Kartica: Vrijeme -->
      <article class="tool-card" id="tool-weather">
        <div class="eyebrow">Meteo</div>
        <h3>Vremenska prognoza</h3>
        <p>Brza lokalna prognoza: temperatura, vjetar, oborina, UV.</p>
        <div class="btn-row">
          <button class="btn" id="openWeatherPanel">Otvori prognozu</button>
        </div>
        <p class="hint">Izvor: open-meteo.com (bez API ključa).</p>
      </article>

      <!-- Kartica: Flora/Fauna -->
      <article class="tool-card" id="tool-bio">
        <div class="eyebrow">Vodič za biljni i životinjski svijet</div>
        <h3>Biljke i životinje (ručno prepoznavanje)</h3>
        <p>Snimi fotku i usporedi s mini vodičem. (Za AI prepoznavanje preporuka: iNaturalist / Pl@ntNet.)</p>
        <div class="btn-row">
          <button class="btn" id="openBioPanel">Otvori vodič</button>
        </div>
        <p class="hint">Radi izvan mreže kao pomoć pri opažanju; na mreži može otvoriti iNaturalist.</p>
      </article>

      <!-- Kartica: Izvan mreže -->
      <article class="tool-card" id="tool-offline">
        <div class="eyebrow">Navigacija</div>
        <h3>Vanmrežni dodaci</h3>
        <p>Preuzmi regiju u OSMand/Organic Maps; GPX spremi lokalno.</p>
        <div class="btn-row">
          <button class="btn ghost" id="openOfflinePanel">Brzi savjeti</button>
        </div>
      </article>

      <!-- Kartica: SOS -->
      <article class="tool-card" id="tool-sos">
        <div class="eyebrow">SOS</div>
        <h3>SOS svijetlo i zviždaljka</h3>
        <p>Glasan ton (••• — — — •••). Broj 112 je prioritet.</p>
        <div class="btn-row">
          <button class="btn alert" id="playSOS">Pokreni SOS</button>
          <button class="btn ghost" id="stopSOS">Zaustavi</button>
        </div>
      </article>

       <!-- Kartica: PeakCam (OSM vrhovi preko kamere) -->
<article class="tool-card" id="tool-peakcam">
  <div class="eyebrow">AR</div>
  <h3>PeakCam — vrhovi u kameri</h3>
  <p>Uperi kameru prema horizontu: strelice i oznake imena vrhova (OSM) pojavljuju se u kadru.</p>
  <ul>
    <li>Potrebno: HTTPS + lokacija + orijentacija</li>
    <li>Automatski dohvat vrhova (30 km) s Overpass/OSM</li>
  </ul>
  <div class="btn-row">
    <button class="btn" id="openPeakCamPanel">Otvori PeakCam</button>
  </div>
  <p class="hint">Licenca podataka: © OpenStreetMap contributors (ODbL 1.0).</p>
</article>
      
    </section>

    <!-- =========================================================
         PANEL: VODIČI
         ========================================================= -->
    <section id="panelAid" class="tool-panel" hidden>
  <h4>Digitalna pomoć — vodiči za planinare</h4>

  <!-- Uvodno pravilo i preporuka -->
  <div class="chip" style="margin-bottom:12px">
    🥾 <b>Prvo i osnovno pravilo:</b> uvijek nosite komplet prve pomoći u ruksaku kada idete na planinarenje i pohađajte tečajeve prve pomoći. 
    Samo tako možete pravovremeno i pravilno reagirati u situacijama kada je pomoć najpotrebnija.
  </div>

  <div class="chip" style="margin-bottom:18px">
    ℹ️ <b>Raspitajte se u svom mjestu ili šire:</b> tečajevi prve pomoći često se organiziraju u sklopu planinarskih društava, gorskih službi spašavanja, Crvenog križa ili kroz edukacije koje provodi medicinsko osoblje. 
    Sudjelovanjem stječete znanje i sigurnost za sebe i svoje suplaninare.
  </div>
  
  <div class="two-col">
    <!-- Lijevi stupac: vodiči (akordeon) -->
    <div>
      <div class="chip">ℹ️ Ovaj vodič ne zamjenjuje tečaj prve pomoći niti liječnički savjet. U hitnim slučajevima odmah nazovi 112.</div>
      <div class="divider"></div>

      <div class="aid-accordion" id="aidAcc">
        <!-- 0. Prvi postupci -->
        <div class="aid-item">
          <button class="aid-head btn ghost" style="width:100%;text-align:left">🧭 Prvi postupci na mjestu nesreće</button>
          <div class="aid-body" style="display:none">
            <ul>
              <li><b>Zaustavi se i procijeni sigurnost:</b> ne prilazi ako prijeti odron, klizav led, munje ili divlje životinje.</li>
              <li><b>Pozovi 112</b> čim procijeniš da je situacija ozbiljna.</li>
              <li><b>Zaštiti, pozovi, pruži pomoć:</b> osiguraj područje, označi stazu, pripremi orijentire (naziv staze, markacije, približne koordinate).</li>
              <li><b>Provjeri svijest i disanje:</b> razgovaraj, protresi rame; ako ne diše normalno, započni oživljavanje.</li>
            </ul>
          </div>
        </div>

        <!-- 1. Oživljavanje odrasle osobe -->
        <div class="aid-item">
          <button class="aid-head btn ghost" style="width:100%;text-align:left">🚑 Oživljavanje odrasle osobe</button>
          <div class="aid-body" style="display:none">
            <ul>
              <li><b>Odmah pozovi 112.</b></li>
              <li><b>Masiraj srce</b> na sredini prsnog koša: 100–120 pritisaka u minuti, dubina 5–6 cm.</li>
              <li><b>Umjetno disanje</b> samo ako znaš i imaš masku.</li>
              <li><b>Razmjena pomagača</b> svake 2 minute ako vas je više.</li>
            </ul>
          </div>
        </div>

        <!-- 2. Gušenje -->
        <div class="aid-item">
          <button class="aid-head btn ghost" style="width:100%;text-align:left">🫁 Gušenje stranim tijelom</button>
          <div class="aid-body" style="display:none">
            <ul>
              <li>Ako osoba <b>kašlje</b> – ohrabri kašalj.</li>
              <li>Ako <b>ne može disati</b> – 5 udaraca između lopatica, zatim 5 potisaka u trbuh; ponavljaj dok se dišni put ne oslobodi.</li>
              <li>Ako izgubi svijest – položi, pozovi 112 i započni masažu srca.</li>
            </ul>
          </div>
        </div>

        <!-- 3. Jako krvarenje -->
        <div class="aid-item">
          <button class="aid-head btn ghost" style="width:100%;text-align:left">🩸 Jako krvarenje</button>
          <div class="aid-body" style="display:none">
            <ul>
              <li><b>Pritisni ranu</b> 10 minuta bez prekidanja.</li>
              <li>Ako promoči, dodaj preko – ne skidaj prvu gazu.</li>
              <li>Za udove: kompresivni zavoj ili turniket (zabilježi vrijeme).</li>
            </ul>
          </div>
        </div>

        <!-- 4. Uganuće i prijelom -->
        <div class="aid-item">
          <button class="aid-head btn ghost" style="width:100%;text-align:left">🦴 Uganuće i prijelom</button>
          <div class="aid-body" style="display:none">
            <ul>
              <li><b>Odmor, hlađenje, pritisak, podizanje</b> – kod uganuća.</li>
              <li><b>Sumnja na prijelom:</b> imobiliziraj u položaju u kojem se zatekne, toplinski zaštiti, pozovi 112.</li>
              <li><b>Ozljeda glave/kralježnice:</b> osoba neka miruje, podupri glavu, ne pomiči vrat.</li>
            </ul>
          </div>
        </div>

        <!-- 5. Hladnoća i smrzavanje -->
        <div class="aid-item">
          <button class="aid-head btn ghost" style="width:100%;text-align:left">🧊 Hladnoća i smrzavanje</button>
          <div class="aid-body" style="display:none">
            <ul>
              <li><b>Blaga:</b> suha odjeća, slojevi, topli napitci (ne alkohol).</li>
              <li><b>Teža:</b> pospanost, usporen govor – nježno zagrijavanje, bez trljanja, pozovi 112.</li>
              <li><b>Smrzotine:</b> ne trljati, ne grijati plamenom; polako zagrijavati u mlakoj vodi ako neće opet smrznuti.</li>
            </ul>
          </div>
        </div>

        <!-- 6. Vrućina i dehidracija -->
        <div class="aid-item">
          <button class="aid-head btn ghost" style="width:100%;text-align:left">🌞 Vrućina i dehidracija</button>
          <div class="aid-body" style="display:none">
            <ul>
              <li><b>Umor od vrućine:</b> hlad, rashlađivanje, male gutljaje vode.</li>
              <li><b>Toplinski udar:</b> visoka temperatura, smetenost – hitno rashladiti i zvati 112.</li>
              <li><b>Dehidracija:</b> tamni urin, vrtoglavica – češće male količine vode i sol.</li>
            </ul>
          </div>
        </div>

        <!-- 7. Visinska bolest -->
        <div class="aid-item">
          <button class="aid-head btn ghost" style="width:100%;text-align:left">⛰️ Tegobe na visini</button>
          <div class="aid-body" style="display:none">
            <ul>
              <li>Glavobolja, mučnina, umor – odmor i hidracija; ako se pogoršava, spusti se.</li>
              <li>Teško disanje, smetenost – hitno spuštanje i 112.</li>
            </ul>
          </div>
        </div>

        <!-- 8. Ugrizi i ubodi -->
        <div class="aid-item">
          <button class="aid-head btn ghost" style="width:100%;text-align:left">🐍 Ugrizi i ubodi</button>
          <div class="aid-body" style="display:none">
            <ul>
              <li><b>Krpelj:</b> pincetom ravno van, prati kožu.</li>
              <li><b>Ubod pčele/ose:</b> hladiti, paziti na alergiju; ako teška reakcija – lijek i 112.</li>
              <li><b>Zmija:</b> mir, imobilizirati, bez rezanja/isisavanja, hitno u bolnicu.</li>
            </ul>
          </div>
        </div>

        <!-- 9. Rane i žuljevi -->
        <div class="aid-item">
          <button class="aid-head btn ghost" style="width:100%;text-align:left">🩹 Rane i žuljevi</button>
          <div class="aid-body" style="display:none">
            <ul>
              <li>Isperi vodom, prekrij gazom.</li>
              <li>Žuljeve zaštiti flasterom; ne bušiti osim sterilno i nužno.</li>
            </ul>
          </div>
        </div>

        <!-- 10. Opekline i oči -->
        <div class="aid-item">
          <button class="aid-head btn ghost" style="width:100%;text-align:left">👁️ Opekline i ozljede oka</button>
          <div class="aid-body" style="display:none">
            <ul>
              <li><b>Oko:</b> ispiranje čistom vodom ili fiziološkom.</li>
              <li><b>Opekline:</b> hladiti vodom 20 min, skinuti nakit, sterilno prekriti, ne mazati mastima.</li>
            </ul>
          </div>
        </div>

        <!-- 11. Grmljavina -->
        <div class="aid-item">
          <button class="aid-head btn ghost" style="width:100%;text-align:left">⚡ Grmljavina</button>
          <div class="aid-body" style="display:none">
            <ul>
              <li>Silazi s grebena, ne stajati pod usamljena stabla.</li>
              <li>Čučni na izolaciji, stopala zajedno, ne ležati.</li>
              <li>Grupa se razmaka nekoliko metara.</li>
            </ul>
          </div>
        </div>

        <!-- 12. Hrana i voda -->
        <div class="aid-item">
          <button class="aid-head btn ghost" style="width:100%;text-align:left">🥾 Voda i hrana</button>
          <div class="aid-body" style="display:none">
            <ul>
              <li>Vodu prokuhati ili filtrirati.</li>
              <li>Ne jesti nepoznate bobice/gljive.</li>
              <li>Mučnina/proljev: odmor, lagana hrana, nadoknada tekućine i soli.</li>
            </ul>
          </div>
        </div>

        <!-- 13. Kronične bolesti -->
        <div class="aid-item">
          <button class="aid-head btn ghost" style="width:100%;text-align:left">💊 Kronične bolesti u planini</button>
          <div class="aid-body" style="display:none">
            <ul>
              <li><b>Šećerna bolest:</b> mjeri šećer, nosi glukozu; ako zbunjen ili bez svijesti – 112.</li>
              <li><b>Tlak/srce:</b> odmori, simptomi u prsima – odmah 112.</li>
              <li><b>Astma:</b> inhalator pri ruci, ako teško disanje – 112.</li>
              <li><b>Epilepsija:</b> zaštiti glavu, ne stavljaj ništa u usta, nakon napadaj okreni na bok, 112 ako traje dugo.</li>
            </ul>
          </div>
        </div>

        <!-- 14. Bol u prsima i moždani udar -->
        <div class="aid-item">
          <button class="aid-head btn ghost" style="width:100%;text-align:left">❤️ Bol u prsima i moždani udar</button>
          <div class="aid-body" style="display:none">
            <ul>
              <li><b>Bol u prsima:</b> miruj, odmah 112.</li>
              <li><b>Moždani udar:</b> asimetrija lica, slabost ruke/noge, teškoće govora – odmah 112.</li>
            </ul>
          </div>
        </div>

        <!-- 15. Signalizacija -->
        <div class="aid-item">
          <button class="aid-head btn ghost" style="width:100%;text-align:left">📢 Signalizacija i spašavanje</button>
          <div class="aid-body" style="display:none">
            <ul>
              <li>Ostani na vidljivom mjestu, koristi zviždaljku, svjetiljku, foliju.</li>
              <li>Daj jasne informacije: naziv staze, zadnja sigurna točka, broj osoba, ozljede.</li>
            </ul>
          </div>
        </div>
      </div>

      <div class="divider"></div>
      <div class="hint">Ovo su sažeti vodiči za laike. Uvijek poštuj upute hitnih službi i liječnika.</div>
    </div>

    <!-- Desni stupac: podsjetnici -->
    <div>
      <h4 style="margin-top:0">Brzi podsjetnici</h4>
      <ul>
        <li>U hitnome: nazovi 112 što ranije, opiši lokaciju i stanje.</li>
        <li>Krvarenje: pritisak 10 min; dodaj preko.</li>
        <li>Hladnoća: suho, slojevito, bez trljanja smrzotina.</li>
        <li>Vrućina: hlad, rashlađivanje, male količine vode.</li>
        <li>Zmija: mir, imobilizacija, bez rezanja, brzo u bolnicu.</li>
        <li>Krpelj: pinceta ravno van, prati kožu.</li>
        <li>Kronične bolesti: lijekovi pri ruci, obavijesti partnera.</li>
      </ul>

      <h4 style="margin-top:12px">Mali planinarski komplet prve pomoći</h4>
      <ul>
        <li>Elastični zavoj, sterilne gaze, flasteri i gel flasteri za žuljeve.</li>
        <li>Fiziološka otopina ili čista voda za ispiranje, dezinfekcijske maramice.</li>
        <li>Rukavice, trokutna marama, škare.</li>
        <li>Termo folija, zviždaljka, čeona svjetiljka, marker i notes.</li>
        <li>Osobni lijekovi (inhalator, glukoza, tablete koje je propisao liječnik).</li>
      </ul>

      <div class="chip" style="margin-top:8px">📞 112 — hitna pomoć i spašavanje</div>
      <div class="chip" style="margin-top:8px">📍 Uvijek nosi osnovne orijentire: naziv staze, markacije, približne koordinate.</div>
    </div>
  </div>
</section>

    <!-- =========================================================
         PANEL: KAMERA
         ========================================================= -->
    <section id="panelCamera" class="tool-panel" hidden>
      <h4>Pejzažno snimanje (ugrađeno)</h4>
      <div class="camera-wrap">
        <video id="camVideo" autoplay playsinline></video>
        <canvas id="camCanvas"></canvas>
        <div class="toolbar">
          <div id="camDot" class="dot" title="Pokazatelj mirnoće"></div>
          <div id="camMsg">Tražim stabilnost…</div>
          <button id="camManual" class="btn ghost">Snimi sada</button>
          <button id="camAuto" class="btn">Auto snimanje: UKLJ.</button>
          <button id="camClose" class="btn ghost">Zatvori</button>
        </div>
        <div class="result">
          <img id="camThumb" alt="Pregled snimljene fotografije">
          <div class="hint">Radi samo na HTTPS/localhost. Snimka ostaje lokalno.</div>
        </div>
      </div>
    </section>

    <!-- =========================================================
         PANEL: KOMPAS + GPX + DEKLINACIJA + LIBELA
         ========================================================= -->
    <section id="panelArrow" class="tool-panel" hidden>
      <h4>Pametni Kompas</h4>
      <div class="compass-wrap">
        <div class="compass-row">
          <!-- Kompas -->
          <div class="compass" aria-label="Kompas">
            <div class="compass-ring" id="compassRing">
              <span class="mark n">N</span>
              <span class="mark e">E</span>
              <span class="mark s">S</span>
              <span class="mark w">W</span>
              <div class="ticks"></div>
            </div>
            <div class="north-needle" id="northNeedle">
              <div class="tip"></div>
            </div>

            <!-- Strelica koja NAVODI (skrivena dok nema GPX ili si na stazi) -->
            <svg id="targetArrow" width="72" height="72" viewBox="0 0 72 72" style="position:absolute; left:50%; top:50%; transform:translate(-50%,-50%) rotate(0deg); display:none; z-index:5;">
              <polygon points="36,6 46,30 36,26 26,30" fill="#e53935"></polygon>
              <rect x="33" y="26" width="6" height="28" rx="3" fill="#e53935"></rect>
            </svg>

            <!-- Zelena kvačica kad si NA stazi -->
            <div id="onPathOK" style="position:absolute; left:50%; top:50%; transform:translate(-50%,-50%); display:none; z-index:5;">
              <svg width="64" height="64" viewBox="0 0 64 64" aria-label="Na stazi">
                <circle cx="32" cy="32" r="28" fill="#2e7d32"></circle>
                <polyline points="20,33 28,41 46,23" fill="none" stroke="#fff" stroke-width="6" stroke-linecap="round" stroke-linejoin="round"></polyline>
              </svg>
            </div>

            <div class="tick"></div>
            <div id="arrow3d" class="arrow3d" style="opacity:0"></div>
          </div>

          <!-- Libela -->
          <div class="level-wrap" aria-label="Libela">
            <div class="level-ring" id="levelRing">
              <div class="lvl-cross lvl-h"></div>
              <div class="lvl-cross lvl-v"></div>
              <div class="level-bubble" id="levelBubble"></div>
            </div>
            <div class="level-readout">
              <span> ↔️ : <b id="pitchDeg">0.0°</b></span>
              <span> ↕️ : <b id="rollDeg">0.0°</b></span>
            </div>
          </div>

          <div class="hint">
            N/E/S/W su na rotirajućem prstenu, crvena igla je fiksna. <br>
            Ako je igla poravnata s N (±5°), plava strelica pokazuje najbližu točku GPX staze.
          </div>
        </div>

        <div class="divider"></div>

        <!-- GPX Učitavanje -->
        <div class="compass-row">
          <div class="field">
            <label for="gpxInput">GPX datoteka:</label>
            <input id="gpxInput" type="file" accept=".gpx,application/gpx+xml">
            <button class="btn ghost" id="loadGpxBtn">Učitaj</button>
          </div>

          <div class="field">
            <label for="gpxUrl">GPX URL:</label>
            <input id="gpxUrl" type="url" placeholder="https://…/ruta.gpx" style="width:260px">
            <button class="btn ghost" id="loadUrlBtn">Učitaj URL</button>
          </div>

          <div class="field">
            <label for="alertMeters">Prag (m) za zvuk:</label>
            <input id="alertMeters" type="number" min="5" step="5" value="30">
            <button class="btn" id="toggleTrackBtn">Pokreni praćenje</button>
          </div>
        </div>

        <div class="status-line" style="margin-top:6px">
          <span class="chip" id="trackStatusPill">GPX: —</span>
          <span class="chip" id="onTrackChip">🧭 status: —</span>
          <span class="chip" id="offDistChip">↔︎ udaljenost: —</span>
        </div>

        <div class="divider"></div>

        <!-- Povratna ruta (Backtrack) -->
        <div class="compass-row">
          <div class="btn-row">
            <button class="btn ghost" id="btStart">Započni povratak</button>
            <button class="btn ghost" id="btStop">Zaustavi povratak</button>
          </div>
          <span class="chip" id="btStatus">↩︎ Povratak: isključen</span>
        </div>

        <div class="divider"></div>

        <!-- Deklinacija i dozvole -->
        <div class="compass-row">
          <div class="chip">
            <label><input type="checkbox" id="useTrueNorth" checked> Geografski sjever</label>
          </div>
          <div class="chip">
            <label><input type="checkbox" id="autoDecl" checked> Auto deklinacija (izvan mreže + GPS)</label>
          </div>
          <div class="chip">
            Deklinacija: <input id="declInput" type="number" step="0.1" style="width:80px">°
          </div>
          <button class="btn ghost" id="declHelp">Upute</button>
          <button class="btn ghost" id="iosPermBtn" style="margin-left:auto">Omogući kompas (iOS)</button>
        </div>

        <p class="hint" style="margin-top:6px">Možeš dodati parametar: <code>?gpx=https://…/ruta.gpx</code></p>

        <div><button class="btn" id="arrowClose">Zatvori</button></div>
      </div>
    </section>

    <!-- =========================================================
         PANEL: NOĆNO NEBO (MINI PLANISFERA)
         ========================================================= -->
    <section id="panelSky" class="tool-panel" hidden>
      <h4>Noćno nebo — Orion i Veliki medvjed (beta)</h4>
      <canvas id="skyCanvas" width="520" height="300"></canvas>
      <div class="sky-legend" id="skyLegend">
        Pomakni telefon: prikaz prati orijentaciju (azimut). <br>
        Kad telefon uperiš prema gore (pitch &le; -60°), istaknut ćemo linije asterizama i nazive zvijezda.
      </div>
      <div class="divider"></div>
      <div class="btn-row">
        <button class="btn" id="skyStart">Uključi senzore</button>
        <button class="btn ghost" id="skyNow">Centriraj na sjever</button>
      </div>
    </section>

    <!-- =========================================================
         PANEL: PROGNOZA VREMENA (OPEN-METEO)
         ========================================================= -->
    <section id="panelWeather" class="tool-panel" hidden>
      <h4>Meteorološka prognoza — sljedeća 3 dana</h4>
      <div class="btn-row">
        <button class="btn" id="wxFetch">Dohvati prema lokaciji</button>
        <input id="wxLat" type="number" step="0.0001" placeholder="Geografska širina" style="width:160px">
        <input id="wxLon" type="number" step="0.0001" placeholder="Geografska dužina" style="width:160px">
        <button class="btn ghost" id="wxFetchManual">Dohvati po koordinatama</button>
      </div>
      <div class="divider"></div>
      <div id="wxCity" class="chip">Lokacija: —</div>
      <div class="weather-grid" id="wxGrid"></div>
    </section>

    <!-- =========================================================
         PANEL: BILJKE / ŽIVOTINJE (RUČNO)
         ========================================================= -->
    <section id="panelBio" class="tool-panel" hidden>
      <h4>Terenski vodič — Biljke i životinje (pomoć izvan mreže)</h4>
      <div class="id-grid">
        <div class="id-row">
          <button class="btn" id="bioOpenCam">Otvori kameru</button>
          <button class="btn ghost" id="bioSnap" disabled>Snimi</button>
          <button class="btn ghost" id="bioCloseCam" disabled>Zatvori</button>
          <button class="btn alt" id="bioINat">iNaturalist (na mreži)</button>
        </div>
        <video id="bioVideo" autoplay playsinline style="width:100%;max-width:420px;border:1px solid var(--line);border-radius:10px;display:none"></video>
        <canvas id="bioCanvas" width="640" height="480" style="display:none"></canvas>
        <img id="bioPhoto" alt="Snimka za usporedbu" style="max-width:420px;border:1px solid var(--line);border-radius:10px;display:none">
        <div class="divider"></div>
        <div class="hint">Brzi vodič (općenito):</div>
        <div class="id-row">
          <span class="tag">Listovi: suprotni ili naizmjenični?</span>
          <span class="tag">Rub lista: cijeli / nazubljen</span>
          <span class="tag">Cvijet: broj latica (4, 5, 6…)</span>
          <span class="tag">Plod: bobica / komuška / oraščić</span>
          <span class="tag">Stanište: livada / šuma / voda</span>
          <span class="tag">Životinja: tragovi — broj prstiju</span>
          <span class="tag">Perje: oblik repa i kljuna</span>
        </div>
      </div>
    </section>

    <!-- =========================================================
         PANEL: SAVJETI IZVAN MREŽE
         ========================================================= -->
    <section id="panelOffline" class="tool-panel" hidden>
      <h4>Savjeti izvan mreže</h4>
      <ul>
        <li><b>Organic Maps</b> ili <b>OSMand</b> — preuzmi regiju za korištenje bez interneta.</li>
        <li>GPX spremi lokalno i otvori iz aplikacije (bez interneta).</li>
        <li>Uključi “Zrakoplovni način” + GPS radi štednje baterije.</li>
      </ul>
      <button class="btn ghost" onclick="this.closest('section').hidden=true">Zatvori</button>
    </section>

          <!-- =========================================================
     PANEL: PEAKCAM (AR vrhovi preko kamere)
     ========================================================= -->
<section id="panelPeakCam" class="tool-panel" hidden>
  <h4>PeakCam — prepoznavanje vrhova (OSM)</h4>

  <div class="pc-toolbar">
    <button id="pc-start" class="btn">Pokreni kameru</button>
    <button id="pc-stop" class="btn ghost">Zatvori</button>
    <span class="chip" id="pc-status">Status: spremno</span>
  </div>

  <div class="pc-wrap">
    <div class="pc-stage">
      <video id="pc-video" autoplay playsinline muted></video>
      <canvas id="pc-overlay"></canvas>
      <div id="pc-hint" class="pc-hint">Dopusti pristup kameri, lokaciji i orijentaciji.</div>
    </div>

    <div class="pc-legend">
      <label class="pc-inline">H FOV
        <input id="pc-hfov" type="range" min="40" max="90" value="60">
        <span id="pc-hfov-val">60°</span>
      </label>
      <label class="pc-inline">V FOV
        <input id="pc-vfov" type="range" min="30" max="70" value="40">
        <span id="pc-vfov-val">40°</span>
      </label>
      <label class="pc-inline">Kompas offset
        <input id="pc-hofs" type="range" min="-20" max="20" value="0">
        <span id="pc-hofs-val">0°</span>
      </label>
    </div>

    <div class="pc-attrib">
      Podaci o vrhovima: © <a href="https://www.openstreetmap.org" target="_blank" rel="noopener">OpenStreetMap contributors</a> — licenca
      <a href="https://opendatacommons.org/licenses/odbl/" target="_blank" rel="noopener">ODbL 1.0</a>.
    </div>
  </div>
</section>
    
  </main>

  <!-- =========================================================
       MINI HUD STRELICA + GPS BANNER + DEKLINACIJA MODAL
       ========================================================= -->
  <div id="miniCompass" aria-label="Mini strelica" hidden>
    <div class="mini-ring"><div id="miniNeedle" class="mini-needle"></div></div>
    <div class="mini-info"><span id="miniMeters">— m</span></div>
  </div>

  <div id="gpsBanner" class="banner" style="display:none">
    <div class="msg">📡 Nema GPS signala — čekam fiks. Navigacija ograničena.</div>
    <div class="actions"><button class="btn ghost" id="bannerHide">Sakrij</button></div>
  </div>

  <div id="declModalBack" class="modal-back">
    <div class="modal" role="dialog" aria-label="Upute za deklinaciju">
      <h5>Deklinacija — kratke upute</h5>
      <p><b>Geografski sjever</b> je prema Zemljinoj osi. <b>Magnetski sjever</b> je gdje pokazuje magnetometar. Razlika je <b>deklinacija</b> (E = dodaj +°, W = oduzmi °).</p>
      <p>Uključena je <b>Auto deklinacija</b> (procjena za Balkan izvan mreže + GPS korekcija). Po želji brojku promijeni ručno.</p>
      <div class="actions">
        <button class="btn ghost" id="declClose">Zatvori</button>
      </div>
    </div>
  </div>

  <!-- FOOTER + BACK TO TOP -->
  <button id="backToTop" title="Na vrh" aria-label="Gumb na vrh">
    <svg viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
      <polyline points="18 15 12 9 6 15"></polyline>
    </svg>
  </button>

  <footer id="footer">
    <div class="footer-icons">
      <a href="https://instagram.com/mountainadventures__" target="_blank" aria-label="Instagram">
        <svg viewBox="0 0 24 24" fill="none" stroke="#ffffff" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
          <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
          <line x1="17.5" y1="6.5" x2="17.5" y2="6.5"></line>
        </svg>
      </a>
      <a href="mailto:mountainadventures1717@gmail.com" aria-label="Email">
        <svg viewBox="0 0 24 24" fill="none" stroke="#ffffff" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
          <polyline points="22,6 12,13 2,6"></polyline>
        </svg>
      </a>
    </div>
    © Mountain Adventures. All rights reserved.
  </footer>

         
       
  <script src="season.js"></script>
  
  
  
